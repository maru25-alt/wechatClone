(function(e){function t(t){for(var s,r,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,r=1;r<a.length;r++){var i=a[r];0!==n[i]&&(s=!1)}s&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var s={},r={app:0},n={app:0},o=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a406d":"f10b612f","chunk-2d0c22cb":"77210aab","chunk-2d0cb6c3":"85ad34c6","chunk-2d217e3c":"4e6a0f10","chunk-8bdfcfca":"5068bbca","chunk-02eac1c2":"21783373"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-8bdfcfca":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{"chunk-2d0a406d":"31d6cfe0","chunk-2d0c22cb":"31d6cfe0","chunk-2d0cb6c3":"31d6cfe0","chunk-2d217e3c":"31d6cfe0","chunk-8bdfcfca":"327a3531","chunk-02eac1c2":"31d6cfe0"}[e]+".css",n=c.p+s,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===n))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===s||u===n)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||n,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete r[e],m.parentNode.removeChild(m),a(o)},m.href=n;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){r[e]=0})));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",d.name="ChunkLoadError",d.type=s,d.request=r,a[1](d)}n[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(a,s,function(t){return e[t]}.bind(null,s));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"05fe":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return c}));var s=a("8aa5"),r={apiKey:"AIzaSyCL_d6h0ll_q8IQT3XvI1xn2XdE01Qz9vs",authDomain:"wechat-clone-b15bc.firebaseapp.com",databaseURL:"https://wechat-clone-b15bc.firebaseio.com",projectId:"wechat-clone-b15bc",storageBucket:"wechat-clone-b15bc.appspot.com",messagingSenderId:"29043597917",appId:"1:29043597917:web:55b4d803f3fbf01e13a3b4",measurementId:"G-1R9NKHKQ6C"};s["initializeApp"](r);var n=s["auth"](),o=s["firestore"](),i=s["storage"](),c=s["firestore"].FieldValue.serverTimestamp;t["c"]=s},4360:function(e,t,a){"use strict";a("b0c0");var s=a("ade3"),r=(a("96cf"),a("1da1")),n=a("a026"),o=a("2f62"),i=a("05fe"),c=a("dcc4"),l=a("ec26"),u=a("a18c"),d=(a("4de4"),a("4160"),a("159b"),a("5530")),m=(a("b47a"),{state:{chats:[],messages:[],chatUser:{},loading:!1},mutations:{setLoading:function(e,t){e.loading=t},setUsers:function(e,t){e.chats=t},setChatuser:function(e,t){e.chatUser=t},setMessages:function(e,t){e.messages=t}},getters:{getChats:function(e){return e.chats},getChatUser:function(e){return e.chatUser},getMessages:function(e){return e.messages}},actions:{getUsers:function(e){var t=e.commit;t("setLoading",!0);var a=localStorage.getItem(c["a"].userUID);i["b"].collection("users").orderBy("createdAt","desc").onSnapshot((function(e){var s=[];e.forEach((function(e){i["b"].collection("users").doc(a).collection("chats").doc(e.id).collection("messages").limit(1).orderBy("createdAt","desc").get().then((function(t){var a={};t.forEach((function(e){a=e.data()})),s.push(Object(d["a"])({id:e.id,lastMessage:a},e.data()))}))})),t("setUsers",s)}))},getChatMessages:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,r=localStorage.getItem(c["a"].userUID),console.log("messages collectes"),i["b"].collection("users").doc(r).collection("chats").doc(t).collection("messages").orderBy("createdAt","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(d["a"])(Object(d["a"])({},e.data()),{},{id:e.id}))})),console.log(t),s("setMessages",t)}));case 4:case"end":return a.stop()}}),a)})))()},getCurrentChatUser:function(e,t){var a=e.commit,s=e.state,r=e.dispatch,n=s.chats.filter((function(e){return e.id===t}));a("setChatuser",n),r("getChatMessages",t)},sendMessage:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.commit,s=localStorage.getItem(c["a"].userUID),s===t?(console.log("me current"),i["b"].collection("users").doc(s).collection("chats").doc(t.docId).collection("messages").add({message:t.message,createdAt:Object(i["e"])(),sender:!0}).catch((function(e){console.log(e)}))):(console.log("not current"),i["b"].collection("users").doc(s).collection("chats").doc(t.docId).collection("messages").add({message:t.message,createdAt:Object(i["e"])(),sender:!0}).then((function(){i["b"].collection("users").doc(t.docId).collection("chats").doc(s).collection("messages").add({message:t.message,createdAt:Object(i["e"])(),sender:!1})})).catch((function(e){console.log(e)})));case 3:case"end":return a.stop()}}),a)})))()}}}),f={state:{userDetails:null,currentUserDetails:null},mutations:{setUserDetails:function(e,t){e.userDetails=t},setCurrentUserDetails:function(e,t){e.currentUserDetails=t}},getters:{getUserDetails:function(e){return e.userDetails},getCurrentUserDetails:function(e){return e.currentUserDetails}},actions:{getDetailsUser:function(e,t){var a=e.commit;i["b"].collection("users").doc(t).get().then((function(e){var t=e.data();a("setUserDetails",t)})).catch((function(e){console.log(e)}))},getCurrentDetailsUser:function(e,t){var a=e.commit;i["b"].collection("users").doc(t).get().then((function(e){var t=e.data();a("setCurrentUserDetails",t)})).catch((function(e){console.log(e)}))}}},g=f;n["a"].use(o["a"]);t["a"]=new o["a"].Store({state:{user:null,loading:!1,progress:!1,notifications:[],defaultPhotoUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQsE7TXbRi1_Fl7bI1sgNvh357qgcrdnRlLJTZUAD10BQ&usqp=CAU&ec=45707743"},mutations:{setLoading:function(e,t){e.loading=t},setUser:function(e,t){e.user=t},setNotifications:function(e,t){e.notifications.push(t)},setRemoveNotifications:function(e){e.notifications=[]},setProgress:function(e,t){e.progress=t},setUpdateProfile:function(e,t){e.user.photoUrl=t}},getters:{getLoading:function(e){return e.loading},getNotifications:function(e){return e.notifications},getDefaultPhotoUrl:function(e){return e.defaultPhotoUrl},getProgress:function(e){return e.progress}},actions:{SignupUserwithGoogle:function(e){var t=e.commit;t("setLoading",!0),t("setRemoveNotifications");var a=new i["c"].auth.GoogleAuthProvider;i["a"].signInWithPopup(a).then((function(e){var a=e.user;i["b"].collection("users").doc(a.uid).set({id:a.uid,wechatId:a.uid,username:a.displayName,photoUrl:a.photoURL,email:a.email,telephone:a.phoneNumber,createdAt:Object(i["e"])(),firstName:"",lastName:"",region:""}).then((function(e){t("setUser",{id:a.uid,wechatId:a.uid,username:a.displayName,photoUrl:a.photoURL,email:a.email}),t("setLoading",!1),localStorage.setItem(c["a"].userUID,a.uid),localStorage.setItem(c["a"].userWechatID,a.uid),localStorage.setItem(c["a"].userEmail,a.email),localStorage.setItem(c["a"].userPhotoUrl,a.photoURL),localStorage.setItem(c["a"].username,a.displayName),localStorage.setItem(c["a"].userDocID,a.uid),u["a"].push("/")}))})).catch((function(e){t("setLoading",!1),t("setNotifications",{type:"error",id:Object(l["a"])(),message:e.message})}))},SignUpWithEmail:function(e,t){var a=e.commit;a("setLoading",!0),a(" setRemoveNotifications"),i["a"].createUserWithEmailAndPassword(t.email,t.password).then((function(e){var s=e.user;i["b"].collection("users").doc(s.uid).set({id:s.uid,wechatId:s.uid,username:t.username,photoUrl:null,email:t.email,telephone:"",createdAt:Object(i["e"])(),firstName:"",lastName:"",region:""}).then((function(e){a("setUser",{id:s.uid,wechatId:s.uid,username:t.username,photoUrl:null,email:t.email}),a("setLoading",!1),localStorage.setItem(c["a"].userUID,s.uid),localStorage.setItem(c["a"].userWechatID,s.uid),localStorage.setItem(c["a"].userEmail,t.email),localStorage.setItem(c["a"].userPhotoUrl,s.null),localStorage.setItem(c["a"].username,t.username),localStorage.setItem(c["a"].userDocID,s.uid),u["a"].push("/")}))})).catch((function(e){a("setLoading",!1),a("setNotifications",{type:"error",id:Object(l["a"])(),message:e.message})}))},SignInWithGoogle:function(e){var t=e.commit;t("setRemoveNotifications"),t("setLoading",!0);var a=new i["c"].auth.GoogleAuthProvider;i["a"].signInWithPopup(a).then((function(e){console.log(e);var a=e.user;i["b"].collection("users").doc(a.uid).get().then((function(e){var s=e.data();console.log(s);var r={id:a.uid,wechatId:s.wechatId,username:s.displayName,photoUrl:s.photoURL,email:s.email};t("setUser",r),t("setLoading",!1),localStorage.setItem(c["a"].userUID,a.uid),localStorage.setItem(c["a"].userWechatID,s.wechatId),localStorage.setItem(c["a"].userEmail,s.email),localStorage.setItem(c["a"].userPhotoUrl,s.photoUrl),localStorage.setItem(c["a"].username,s.username),localStorage.setItem(c["a"].userDocID,a.uid),u["a"].push("/")}))})).catch((function(e){t("setLoading",!1),t("setNotifications",{type:"error",id:Object(l["a"])(),message:e.message})}))},SignInwithEmail:function(e,t){var a=e.commit;a("setLoading",!0),a(" setRemoveNotifications"),i["a"].signInWithEmailAndPassword(t.email,t.password).then((function(e){var t=e.user;console.log(t.uid),i["b"].collection("users").doc(t.uid).get().then((function(e){var s=e.data();console.log(doc);var r={id:t.uid,wechatId:s.wechatId,username:s.displayName,photoUrl:s.photoURL,email:s.email};a("setUser",r),a("setLoading",!1),localStorage.setItem(c["a"].userUID,s.id),localStorage.setItem(c["a"].userWechatID,s.wechatId),localStorage.setItem(c["a"].userEmail,s.email),localStorage.setItem(c["a"].userPhotoUrl,s.photoURL),localStorage.setItem(c["a"].username,s.username),localStorage.setItem(c["a"].userDocID,doc.id),u["a"].push("/")})).catch((function(e){a("setLoading",!1),a("setNotifications",{type:"error",id:Object(l["a"])(),message:e.message})}))})).catch((function(e){a("setLoading",!1),a("setNotifications",{type:"error",id:Object(l["a"])(),message:e.message})}))},SignOut:function(e){var t=e.commit;i["a"].signOut().then((function(){localStorage.clear(),t("setUser",null),u["a"].push("/account")}))},autoSignin:function(e){var t=e.commit,a=localStorage.getItem(c["a"].userUID),s=localStorage.getItem(c["a"].userWechatID),r=localStorage.getItem(c["a"].userEmail),n=localStorage.getItem(c["a"].userPhotoUrl),o=localStorage.getItem(c["a"].username),i=localStorage.getItem(c["a"].userDocID),l={id:a,wechatId:s,username:o,photoUrl:n,email:r,docId:i};t("setUser",l)},uploadProfileUrl:function(e,t){var a=e.commit,s=i["d"].ref("/users/".concat(t.name));s.put(t).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);console.log(t),a("setProgress",!0)}),(function(e){console.log(e.message)}),Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.getDownloadURL();case 2:t=e.sent,r=localStorage.getItem(c["a"].userUID),n=i["a"].currentUser,n&&(n.updateProfile({photoURL:t}),i["b"].collection("users").doc(r).update({photoUrl:t}),localStorage.setItem(c["a"].userPhotoUrl,t),a("setProgress",!1),a("setUpdateProfile",t));case 6:case"end":return e.stop()}}),e)}))))},updateUserData:function(e,t){var a,r=e.commit;console.log("loading"),r("setProgress",!0);var n=localStorage.getItem(c["a"].userUID),o=i["a"].currentUser;o&&o.updateProfile({displayName:t.username}),i["b"].collection("users").doc(n).update((a={username:t.username,wechatId:t.wechatId},Object(s["a"])(a,"username",t.username),Object(s["a"])(a,"email",t.email),Object(s["a"])(a,"firstName",t.firstName),Object(s["a"])(a,"lastName",t.lastName),Object(s["a"])(a,"region",t.region),a)).then((function(e){localStorage.setItem(c["a"].userWechatID,t.wechatId),localStorage.setItem(c["a"].userEmail,t.email),localStorage.setItem(c["a"].username,t.username),r("setProgress",!1),r("setNotifications",{type:"success",id:Object(l["a"])(),message:"Successfully Updated"})})).catch((function(e){console.log(e),r("setNotifications",{type:"error",id:Object(l["a"])(),message:"Failed to update"}),r("setProgress",!1)}))}},modules:{chats:m,contacts:g}})},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="4678"},"4ffd":function(e,t,a){e.exports=a.p+"img/logo.a2ce2f13.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{staticClass:"app"},[s("v-app-bar",{attrs:{dense:""}},[s("v-app-bar-nav-icon"),s("v-toolbar-title",[s("v-img",{staticClass:"img-fluid",attrs:{width:"50",src:a("4ffd"),alt:"logo"}})],1),s("v-toolbar-title",[e._v(e._s(e.$t("title")))]),s("v-spacer"),e._l(e.languages,(function(t){return s("v-btn",{key:t.title,staticClass:"ml-5",attrs:{color:e.currentLang===t.language?"success":""},on:{click:function(a){return e.changeLocale(t.language)}}},[s("flag",{attrs:{iso:t.flag,squared:!1}}),e._v(" "+e._s(t.title)+" ")],1)})),s("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[s("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[s("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[s("v-list",e._l(5,(function(t){return s("v-list-item",{key:t,on:{click:function(){}}},[s("v-list-item-title",[e._v("Option "+e._s(t))])],1)})),1)],1)],2),s("v-container",{staticClass:"main",attrs:{"grid-list-xs":""}},[s("router-view")],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"sidebar"},[a("div",{staticClass:"icons__container"},e._l(e.icons,(function(t){return a("v-btn",{key:t.id,staticClass:"icon-button",attrs:{fab:"",color:t.color}},[a("v-icon",{staticClass:"icon"},[e._v(e._s(t.icon))])],1)})),1),a("div",{staticClass:"sidebar__navigation"},[a("profile"),e._l(e.appRoutes,(function(t){return a("router-link",{key:t.name,staticClass:"nav__link",attrs:{to:t.path}},[a("v-icon",{staticClass:"icon",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:e.$t(t.name)}},[e._v(e._s(t.icon)+" ")])],1)}))],2),a("div",{staticClass:"bottom__navs"},[a("v-btn",{attrs:{text:"","data-toggle":"tooltip","data-placement":"bottom",title:e.$t("Phone")}},[a("v-icon",{staticClass:"icon"},[e._v("mdi-cellphone")])],1),a("Settings")],1)])},i=[],c=a("a18c"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:"","data-toggle":"tooltip","data-placement":"bottom",title:e.$t("Settings")}},"v-btn",r,!1),s),[a("v-icon",{staticClass:"icon"},[e._v("mdi-menu")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[a("h6",[e._v("Account Info:")])]),a("v-card-text",[a("v-row",[a("v-col",[a("div",[a("v-img",{attrs:{src:e.profile,width:"150"}}),a("h6",[e._v(e._s(e.username))])],1)]),a("v-col",[a("v-btn",{attrs:{color:"success"},on:{click:e.handleSignOut}},[e._v("Logout")])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")])],1)],1)],1)],1)},u=[],d=a("dcc4"),m={data:function(){return{dialog:!1}},computed:{defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl},userUrl:function(){return localStorage.getItem(d["a"].userPhotoUrl)},profile:function(){return"undefined"!==this.userUrl?this.userUrl:this.defaultUrl},username:function(){return localStorage.getItem(d["a"].username)}},methods:{handleSignOut:function(){this.$store.dispatch("SignOut")}}},f=m,g=a("2877"),h=a("6544"),p=a.n(h),v=a("8336"),b=a("b0af"),_=a("99d9"),j=a("62ad"),y=a("169a"),U=a("132d"),I=a("adda"),C=a("0fd9"),D=a("2fa4"),w=Object(g["a"])(f,l,u,!1,null,null,null),k=w.exports;p()(w,{VBtn:v["a"],VCard:b["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VCol:j["a"],VDialog:y["a"],VIcon:U["a"],VImg:I["a"],VRow:C["a"],VSpacer:D["a"]});var S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"profileModal mb-3",attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("img",e._g(e._b({staticClass:"profile",attrs:{alt:"profile",src:e.profile}},"img",r,!1),s))]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("profile"))+" ")]),a("v-card-text",[a("contact-details",{attrs:{id:e.currentUserId,userData:e.userData,profile:e.profile}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"",to:{name:"Chat",params:{id:e.currentUserId}}},nativeOn:{click:function(t){return e.getData(t)}}},[e._v(" "+e._s(e.$t("message"))+" ")]),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" "+e._s(e.$t("close"))+" ")])],1)],1)],1)],1)},x=[],P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.userData?a("div",{staticClass:"contactDetails"},[a("div",{staticClass:"contactDetails__header mb-2 align-items-start "},[a("div",[""!==e.userData.firstName?a("h5",[e._v(e._s(e.userData.firstName)+" "+e._s(e.userData.lastName))]):e._e(),a("h6",[e._v(e._s(e.userData.username))]),a("img",{attrs:{src:e.profile,alt:"profile"}})]),a("div",{staticClass:"ml-10"},[a("edit-profile")],1)]),a("v-divider"),a("div",{staticClass:"contactDetails__body  mb-2"},[a("table",[a("tbody",[""!==e.userData.region?a("tr",[a("td",[e._v(e._s(e.$t("Region"))+": ")]),a("td",[e._v(e._s(e.userData.region))])]):e._e(),a("tr",[a("td",[e._v(e._s(e.$t("wechatId"))+": ")]),a("td",[e._v(e._s(e.userData.wechatId))])]),a("tr",[a("td",[e._v(e._s(e.$t("Email"))+": ")]),a("td",[e._v(e._s(e.userData.email))])])])])])],1):e._e()},N=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{v:"",small:"",color:"success"}},"v-btn",r,!1),s),[e._v(e._s(e.$t("edit")))])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"success"}},[a("v-toolbar-title",[e._v(e._s(e.$t("edit")))]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1),e._l(e.notifications,(function(t){return e.notifications?a("v-alert",{key:t.id,attrs:{dismissible:"",type:t.type}},[e._v(" "+e._s(t.message)+" ")]):e._e()})),e.progress?a("loading",{attrs:{dialog:e.progress}}):e._e(),a("v-row",{attrs:{justify:"center"}},[a("v-form",{ref:"form",staticClass:"mt-5",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-img",{attrs:{"mr-4":"",src:e.src,alt:"profile",width:"50"}}),a("v-file-input",{attrs:{rules:e.profileRules,accept:"image/png, image/jpeg, image/jpg",placeholder:"Pick an avatar","prepend-icon":"mdi-camera",label:"Profile Photo"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),e.file?a("v-btn",{attrs:{disabled:e.progress,"x-small":"",color:"success"},on:{click:e.UploadProfile}},[e.progress?a("v-progress-circular",{attrs:{indeterminate:"",size:"20"}}):e._e(),e._v(" "+e._s(e.$t("upload"))+" ")],1):e._e()],1),a("v-text-field",{attrs:{rules:e.nameRules,label:e.$t("username"),required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:e.$t("firstName"),required:""},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{label:e.$t("lastName"),required:""},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:e.$t("Email"),required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{rules:e.wechatIdRules,label:e.$t("wechatId"),required:""},model:{value:e.wechatId,callback:function(t){e.wechatId=t},expression:"wechatId"}}),a("div",{staticClass:"form-group"},[a("country-select",{staticClass:"form-control",attrs:{country:e.country,topCountry:"US"},model:{value:e.country,callback:function(t){e.country=t},expression:"country"}})],1),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v(" "+e._s(e.$t("close"))+" ")]),a("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:e.updateProfile}},[e._v(" "+e._s(e.$t("update"))+" ")])],1)],1)],2)],1)],1)},$=[],V=(a("b0c0"),a("ade3")),E=(a("96cf"),a("1da1")),L={data:function(){return{dialog:!1,valid:!0,file:null,profileRules:[function(e){return!e||e.size<2e6||"Profile size should be less than 2 MB!"}],username:"",nameRules:[function(e){return!!e||"Username is required"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],country:"",firstName:"",lastName:"",wechatId:"",src:"",wechatIdRules:[function(e){return!!e||"wechat id is required"}]}},computed:{userData:function(){return this.$store.getters.getCurrentUserDetails},defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl},getPhotoUrl:function(){return localStorage.getItem(d["a"].userPhotoUrl)},progress:function(){return this.$store.getters.getProgress},loading:function(){return this.$store.getters.getLoading},notifications:function(){return this.$store.getters.getNotifications}},methods:{UploadProfile:function(){null===this.file&&this.file==={}||(this.$store.dispatch("uploadProfileUrl",this.file),this.src=null!==this.getPhotoUrl?this.getPhotoUrl:this.defaultUrl,this.file=null)},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updateProfile:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.form.validate(),t.next=3,e.$store.dispatch("updateUserData",(a={username:e.username,wechatId:e.wechatId},Object(V["a"])(a,"username",e.username),Object(V["a"])(a,"email",e.email),Object(V["a"])(a,"firstName",e.firstName),Object(V["a"])(a,"lastName",e.lastName),Object(V["a"])(a,"region",e.country),a));case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.firstName=this.userData.firstName,this.lastName=this.userData.lastName,this.wechatId=this.userData.wechatId,this.country=this.userData.region,this.email=this.userData.email,this.name=this.userData.name,this.username=this.userData.username,this.src=null!==this.userData.photoUrl?this.userData.photoUrl:this.defaultUrl}},A=L,R=a("0798"),M=a("23a7"),T=a("4bd4"),z=a("490a"),B=a("8654"),W=a("71d9"),q=a("2a7f"),F=Object(g["a"])(A,O,$,!1,null,null,null),K=F.exports;p()(F,{VAlert:R["a"],VBtn:v["a"],VCard:b["a"],VDialog:y["a"],VFileInput:M["a"],VForm:T["a"],VIcon:U["a"],VImg:I["a"],VProgressCircular:z["a"],VRow:C["a"],VSpacer:D["a"],VTextField:B["a"],VToolbar:W["a"],VToolbarItems:q["a"],VToolbarTitle:q["b"]});var G={props:["id","userData","profile"],components:{EditProfile:K}},H=G,Q=a("ce7e"),J=Object(g["a"])(H,P,N,!1,null,null,null),X=J.exports;p()(J,{VDivider:Q["a"]});var Y={data:function(){return{dialog:!1}},components:{ContactDetails:X},computed:{defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl},userUrl:function(){return localStorage.getItem(d["a"].userPhotoUrl)},userData:function(){return this.$store.getters.getCurrentUserDetails},profile:function(){return null!==this.userData?this.userUrl:this.defaultUrl},currentUserId:function(){return localStorage.getItem(d["a"].userUID)}},methods:{getData:function(){this.$store.dispatch("getCurrentChatUser",this.currentUserId),this.dialog=!1}},created:function(){this.$store.dispatch("getCurrentDetailsUser",this.currentUserId)}},Z=Y,ee=Object(g["a"])(Z,S,x,!1,null,null,null),te=ee.exports;p()(ee,{VBtn:v["a"],VCard:b["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VDialog:y["a"],VRow:C["a"],VSpacer:D["a"]});var ae={components:{Settings:k,Profile:te},data:function(){return{appRoutes:c["b"],icons:[{color:"red darken-3",icon:"mdi-window-close",id:"1"},{color:"amber accent-3",icon:"mdi-minus",id:"2"},{color:"green darken-1",icon:"mdi-arrow-expand",id:"3"}]}},computed:{defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl}}},se=ae,re=Object(g["a"])(se,o,i,!1,null,null,null),ne=re.exports;p()(re,{VBtn:v["a"],VIcon:U["a"]});var oe=a("a925");s["a"].use(oe["a"]);var ie={en:{title:"WeChat Clone",Home:"Home",Contacts:"Contacts",Files:"Files",Favourites:"Favourite",Settings:"Settings",Phone:"Phone",Search:"Search",Type:"Type here...",profile:"My Profile",edit:"Edit Profile",wechatId:"Wechat ID",Region:"Region",Email:"Email",message:"message",close:"close",photo:"Profile Photo",upload:"Upload",username:"Username",firstName:"First Name",lastName:"Last Name",update:"Update",welcomeMsg:"Welcome to Wechat Clone",signin:"Sign in",signup:"Sign up",createAccount:"Create Account",signinWithGoogle:"Signin With Google",password:"Password",rememberMe:"Remember Me",confirmPassword:"Confirm Password",agreeStmnt:"By clicking Create account, you agree to our Service Terms"},cn:{title:"微信克隆",Home:"家",Contacts:"联络人",Files:"档案",Favourites:"喜爱",Settings:"设定值",Phone:"电话",Search:"搜索",Type:"在此输入...",profile:"我的简历",edit:"编辑个人资料",wechatId:"微信编号",Region:"地区",Email:"电子邮件",message:"信息",close:"发送",photo:"头像照片",upload:"上载",username:"用户名",firstName:"名字",lastName:"姓",update:"更新资料",welcomeMsg:"欢迎来到微信克隆",signin:"登入",signup:"注册",createAccount:"创建帐号",signinWithGoogle:"使用Google登录",password:"密码",confirmPassword:"确认密码",rememberMe:"记得我",agreeStmnt:"点击创建帐户，即表示您同意我们的服务条款"}},ce=new oe["a"]({locale:"en",fallbackLocale:"cn",messages:ie}),le=ce,ue={name:"App",components:{SidebarVue:ne},data:function(){return{languages:[{flag:"us",language:"en",title:"English"},{flag:"cn",language:"cn",title:"中国"}]}},computed:{currentLang:function(){return le.locale}},methods:{changeLocale:function(e){le.locale=e}}},de=ue,me=a("7496"),fe=a("40dc"),ge=a("5bc1"),he=a("a523"),pe=a("8860"),ve=a("da13"),be=a("5d23"),_e=a("e449"),je=Object(g["a"])(de,r,n,!1,null,null,null),ye=je.exports;p()(je,{VApp:me["a"],VAppBar:fe["a"],VAppBarNavIcon:ge["a"],VBtn:v["a"],VContainer:he["a"],VIcon:U["a"],VImg:I["a"],VList:pe["a"],VListItem:ve["a"],VListItemTitle:be["a"],VMenu:_e["a"],VSpacer:D["a"],VToolbarTitle:q["b"]});var Ue=a("4360"),Ie=a("f309");a("1f54");s["a"].use(Ie["a"]);var Ce=new Ie["a"]({icons:{iconfont:"fa4"}}),De=(a("6672"),a("d21d")),we=a.n(De),ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-text",{staticClass:"text-center py-5"},[a("v-progress-circular",{attrs:{indeterminate:"",color:"green"}})],1)],1)],1)],1)},Se=[],xe={props:["dialog"],data:function(){return{}},computed:{isDialog:function(){return console.log(this.dialog),this.dialog}}},Pe=xe,Ne=Object(g["a"])(Pe,ke,Se,!1,null,null,null),Oe=Ne.exports;p()(Ne,{VCard:b["a"],VCardText:_["b"],VDialog:y["a"],VProgressCircular:z["a"],VRow:C["a"]});a("8aa5");var $e=a("05fe"),Ve=a("c1df"),Ee=a.n(Ve),Le=a("d61f");s["a"].use(Le["a"]),s["a"].component("sidebar",ne),s["a"].component("loading",Oe),s["a"].use(we.a),s["a"].prototype.moment=Ee.a,s["a"].config.productionTip=!1,new s["a"]({router:c["a"],store:Ue["a"],vuetify:Ce,i18n:le,render:function(e){return e(ye)},created:function(){var e=this;$e["a"].onAuthStateChanged((function(t){t&&e.$store.dispatch("autoSignin")}))}}).$mount("#app")},6672:function(e,t,a){},a18c:function(e,t,a){"use strict";a.d(t,"b",(function(){return X}));a("99af"),a("d3b7");var s=a("a026"),r=a("8c4f"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app__container row"},[a("sidebar",{staticClass:"d-none d-sm-block d-sm-none d-md-block  col-sm-2 col-md-1"}),a("div",{staticClass:"home col-xs-12 col-sm-10 col-md-11 row"},[a("chats",{staticClass:"d-none d-sm-block  col-sm-4 col-md-3"}),a("router-view",{staticClass:"col-xs-12 col-sm-8 col-md-9",attrs:{name:"home"}})],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chats"},[a("div",{staticClass:"search__section"},[a("form",{staticClass:"search__form"},[a("v-icon",{staticClass:"icon"},[e._v("mdi-magnify")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search__input",attrs:{type:"text",outlined:"","clear-icon":"mdi-close-circle",clearable:"",placeholder:e.$t("Search")+"...","append-icon":"mdi-magnify"},domProps:{value:e.search},on:{"click:clear":e.clearSearch,input:function(t){t.target.composing||(e.search=t.target.value)}}})],1),a("button",{staticClass:"btn search__button btn-outline-secondary",attrs:{outlined:""}},[a("v-icon",{staticClass:"icon"},[e._v("mdi-plus")])],1)]),a("div",{staticClass:"chats__container"},e._l(e.queryChats,(function(e){return a("chat",{key:e.id,attrs:{id:e.id,data:e}})})),1)])},c=[],l=(a("a623"),a("4de4"),a("caad"),a("ac1f"),a("2532"),a("841c"),a("1276"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-link",{staticClass:"chat",attrs:{to:{name:"Chat",params:{id:e.id}},"active-class":"active"},nativeOn:{click:function(t){return e.GetMessageData(t)}}},[a("img",{attrs:{src:e.data.photoUrl?e.data.photoUrl:e.defaultUrl,alt:"user"}}),a("div",{staticClass:"chat__content"},[a("div",{staticClass:"chat__contentTop"},[a("tr",[a("td",[a("h5",[e._v(e._s(e._f("firstName")(e.data.username)))])]),a("td",[0===e.timestamp(e.data.lastMessage.createdAt.toDate())?a("h6",{staticClass:"small__text"},[e._v(e._s(e.moment(e.data.lastMessage.createdAt.toDate()).format("LT"))+" ")]):2===e.timestamp(e.data.lastMessage.createdAt.toDate())?a("h6",{staticClass:"small__text"},[e._v("Yesterday ")]):a("h6",{staticClass:"small__text"},[e._v(e._s(e.moment(e.data.lastMessage.createdAt.toDate()).format("L"))+" ")])])])]),a("div",{staticClass:"chat__contentBottom"},[a("div",{staticClass:"small__text"},[e._v(" "+e._s(e.data.lastMessage.message))])])])])}),u=[],d=a("ff72"),m=a("c1df"),f=a.n(m),g={props:["data","id"],computed:{defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl}},filters:{firstName:d["a"]},methods:{GetMessageData:function(){this.$store.dispatch("getCurrentChatUser",this.id)},timestamp:function(e){var t=f()().startOf("day"),a=f()(e).startOf("day");return f.a.duration(t.diff(a)).days()}}},h=g,p=a("2877"),v=Object(p["a"])(h,l,u,!1,null,null,null),b=v.exports,_={data:function(){return{search:""}},components:{Chat:b},computed:{Chats:function(){return this.$store.getters.getChats},queryChats:function(){var e=this;return this.search?this.Chats.filter((function(t){return e.search.toLowerCase().split(" ").every((function(e){return t.username.toLowerCase().includes(e)}))})):this.Chats}},created:function(){this.$store.dispatch("getUsers")},methods:{clearSearch:function(){this.search=""}}},j=_,y=a("6544"),U=a.n(y),I=a("132d"),C=Object(p["a"])(j,i,c,!1,null,null,null),D=C.exports;U()(C,{VIcon:I["a"]});var w={components:{Chats:D}},k=w,S=Object(p["a"])(k,n,o,!1,null,null,null),x=S.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.chatUser?a("div",{staticClass:"messageBox"},[a("div",{staticClass:"messageBox__header"},[a("h6",[e._v(e._s(e._f("firstName")(e.chatUser.username)))]),a("v-icon",[e._v("mdi-dots-horizontal")])],1),a("div",{staticClass:"messageBox__body",attrs:{id:"messageDisplay"}},e._l(e.Messages,(function(t,s){return a("message",{key:s,attrs:{message:t,chatUserPhotoUrl:e.chatUser.photoUrl}})})),1),a("div",{staticClass:"messageBox__footer"},[a("form",{staticClass:"messageBox__form"},[a("div",{staticClass:"messageForm__iconsContainer"},[a("div",{staticClass:"left__icons"},[a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-emoticon-outline")])],1),a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-folder-outline")])],1),a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-content-cut")])],1),a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-chat-processing-outline")])],1)]),a("div",{staticClass:"right__icons"},[a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-phone-outline")])],1),a("button",{attrs:{type:"button"}},[a("v-icon",[e._v("mdi-video-outline")])],1)])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"text__area",attrs:{rows:"3",name:"message",placeholder:e.$t("Type")},domProps:{value:e.message},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:e.newline(t):null}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.handleSendMessage(t)},input:function(t){t.target.composing||(e.message=t.target.value)}}})])])]):e._e()},N=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.message?a("div",[e._v(" "+e._s(e.timeStamp())+" "),!0===e.timeStamp(e.moment(e.message.createdAt.toDate()).format("dddd"))?a("div",{staticClass:"text-center font-weight-light text--secondary"},[e._v(" Today, "+e._s(e.moment(e.message.createdAt.toDate()).format("h:mm a")))]):!1===e.timeStamp(e.moment(e.message.createdAt.toDate()).format("dddd"))?a("div",{staticClass:"text-center font-weight-light text--secondary"},[e._v("Yesterday, "+e._s(e.moment(e.message.createdAt.toDate()).format("h:mm a")))]):a("div",{staticClass:"text-center font-weight-light text--secondary"},[e._v(" "+e._s(e.moment(e.message.createdAt.toDate()).format("dddd, h:mm a")))]),a("div",{class:e.message.sender?"send-message message clearfix":"message clearfix"},[e.message.sender?a("div",{staticClass:"message-profile"},[a("img",{attrs:{src:e.getPhotoUrl(e.userUrl),width:"50"}})]):a("div",{staticClass:"message-profile"},[a("img",{attrs:{src:e.getPhotoUrl(e.chatUserPhotoUrl),width:"50"}})]),a("div",{class:e.message.sender?"send-message-text message-text":"message-text"},[e._v(" "+e._s(e.message.message)+" ")])])]):e._e()},$=[],V=a("dcc4"),E={props:["message","chatUserPhotoUrl"],computed:{defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl},userUrl:function(){return localStorage.getItem(V["a"].userPhotoUrl)}},methods:{getPhotoUrl:function(e){var t="";return t=null===e||void 0===e||""===e?this.defaultUrl:e,t},timeStamp:function(e){return f()().format("dddd")===e||f()().subtract(1,"days").format("dddd")!==e&&void 0}}},L=E,A=Object(p["a"])(L,O,$,!1,null,null,null),R=A.exports,M={components:{Message:R},data:function(){return{message:""}},filters:{firstName:d["a"]},computed:{chatUser:function(){return this.$store.getters.getChatUser[0]},Messages:function(){return this.$store.getters.getMessages}},updated:function(){var e=this.$el.querySelector("#messageDisplay");e.scrollTop=e.scrollHeight},methods:{handleSendMessage:function(){""!==this.message&&(this.$store.dispatch("sendMessage",{message:this.message,docId:this.chatUser.id}),this.message="")},newline:function(){this.value="".concat(this.value,"\n")}}},T=M,z=Object(p["a"])(T,P,N,!1,null,null,null),B=z.exports;U()(z,{VIcon:I["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.userData?a("div",{staticClass:"contactDetails"},[a("div",{staticClass:"contactDetails__header mb-5"},[a("div",[""!==e.userData.firstName?a("h5",[e._v(e._s(e.userData.firstName)+" "+e._s(e.userData.lastName))]):e._e(),a("h6",[e._v(e._s(e.userData.username))])]),a("img",{attrs:{src:e.profile(e.userData.photoUrl),alt:"profile"}})]),a("div",{staticClass:"contactDetails__body  mb-5"},[a("table",[a("tbody",[""!==e.userData.region?a("tr",[a("td",[e._v("Region: ")]),a("td",[e._v(e._s(e.userData.region))])]):e._e(),a("tr",[a("td",[e._v("Wechat ID:")]),a("td",[e._v(e._s(e.userData.wechatId))])]),a("tr",[a("td",[e._v("Email:")]),a("td",[e._v(e._s(e.userData.email))])])])])]),a("div",{staticClass:" mb-5"},[a("v-btn",{attrs:{to:{name:"Chat",params:{id:e.id}},color:"success"}},[e._v("Message")])],1)]):e._e()},q=[],F={computed:{id:function(){return this.$route.params.id},userData:function(){return this.$store.getters.getUserDetails},defaultUrl:function(){return this.$store.getters.getDefaultPhotoUrl}},methods:{profile:function(e){return null!==e?e:this.defaultUrl}}},K=F,G=a("8336"),H=Object(p["a"])(K,W,q,!1,null,null,null),Q=H.exports;U()(H,{VBtn:G["a"]}),s["a"].use(r["a"]);localStorage.getItem(V["a"].userUID);var J={path:"/account",name:"Account",component:function(){return Promise.all([a.e("chunk-8bdfcfca"),a.e("chunk-02eac1c2")]).then(a.bind(null,"77be"))},children:[{path:"signin",name:"Signin",component:function(){return a.e("chunk-2d0cb6c3").then(a.bind(null,"4a33"))}},{path:"signup",name:"Signup",component:function(){return a.e("chunk-8bdfcfca").then(a.bind(null,"34c3"))}}]},X=[{path:"/",name:"Home",icon:" mdi-chat-outline",component:x,children:[{path:"/chat/:id",name:"Chat",components:{home:B}}]},{path:"/contact",name:"Contacts",icon:"mdi-account-details-outline",component:function(){return a.e("chunk-2d217e3c").then(a.bind(null,"c93c"))},children:[{path:"/contact/:id",name:"Contact",components:{contact:Q}}]},{path:"/files",name:"Files",icon:"mdi-folder-multiple-outline",component:function(){return a.e("chunk-2d0a406d").then(a.bind(null,"054f"))}},{path:"/favorites",name:"Favourites",icon:" mdi-package-variant-closed",component:function(){return a.e("chunk-2d0c22cb").then(a.bind(null,"48d5"))}}],Y=[].concat(X,[J]),Z=new r["a"]({mode:"history",base:"/",routes:Y});t["a"]=Z},dcc4:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s={userEmail:"email",userUID:"UID",userWechatID:"wechatId",userPhotoUrl:"photoUrl",username:"username",userDocID:"docID"}},ff72:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("c975");var s=function(e){var t=e.indexOf(" ");return-1===t?e:e.substr(0,t)}}});
//# sourceMappingURL=app.bae9dac1.js.map